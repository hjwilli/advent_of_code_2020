
def input = getInput()
//def input = getExample()

def res


res = part_1(input)
println "part 1: $res"

res = part_2(input)
println "part 2: $res"


//-----
def part_1(def input) {
	return treeCalc(input, 3, 1)
}

/*
Right 1, down 1.
Right 3, down 1. (This is the slope you already checked.)
Right 5, down 1.
Right 7, down 1.
Right 1, down 2.
*/
def part_2(def input) {
	return treeCalc(input, 1, 1) *
		treeCalc(input, 3, 1) *
		treeCalc(input, 5, 1) *
		treeCalc(input, 7, 1) *
		treeCalc(input, 1, 2)
}

def treeCalc(def input, def right, def down) {
	def width = input.first().size()
	def height = input.size()

	def x = 0
	def y = 0

	def trees = 0

	while (y < height) {
		//println ("($x, $y) - ${input.get(y).getAt(x)}")
		if (input.get(y).getAt(x) == "#") trees = trees + 1
		y = y + down
		x = (x + right) % width 
	}

	return trees as Long
}


//-----
def getInput() {
	def input = [
".#...#.......#...#...#.#.#.....",
"####.....#.#..#...#...........#",
".....#...........#......#....#.",
"......#..#......#.#..#...##.#.#",
"............#......#...........",
"...........#.#.#....#.......##.",
"....#.......#..............#...",
"........##...#.#.....##...##.#.",
".#.#.....##................##..",
".##................##..#...##..",
"....#...###...##.........#....#",
".##......#.........#...........",
"...#.#.#....#....#...#...##...#",
"..#....##...#..#.#..#.....#.#..",
".......#...#..#..#.....#...#..#",
".....#......#.......#.....#.#..",
"....#..#...#..#####....##......",
".#...........#......#....#....#",
"#......#.###.....#....#....#...",
"....#..#.#.#..#...........##...",
"..#..#..#.#...#......#....#.##.",
".##....#......#...#.#..#.......",
"..###.#...#.........#.#.#...#.#",
"#....###.........#...#...#...#.",
"...##.#............#...##......",
"...#.........#............#....",
"......##...#...##..#...........",
"........##..#.#.####...#.....#.",
".##.........#......#..#..#...#.",
"..........#...#..........#.....",
"#..........#........#..#..#.#..",
"..#....#.#.#.#.#..#.##.........",
"##.#.#.##.....#..#......###....",
"##....#...#.....#..............",
".#..#...#...#....###......#....",
"#....#......#.#..#.#........###",
".#....#..#...###....#...##.....",
".#....#.....#.....#..##..#.....",
"#....#.##...#...#..#.##.##.#...",
".#.#.#.##...#####.............#",
"......##..#.....##..#...####...",
"#.##..#.#....#..##.......###..#",
"..#.......##....#........#.##..",
"#.....#......#.....#....#..#...",
".......##...#.....##.......#..#",
".......#...#.#.#.........#####.",
"#.......#.##..##........##.....",
"##..#...#........##....#.......",
".......#...##......##...##.##..",
"......#..##..#.#...#...#....##.",
"....#.#..#.....#.##.#.....#.#..",
"#..#.#.#........#...#.......##.",
"##...........#..#........#.....",
"....##....#....#.#.......#.....",
"....##.#.#.....#.#.....#.....#.",
"..........#.#..##..#..#.......#",
"#....#.......##...#...#.....#..",
".........##.....#.#....#......#",
"..........#........#..#..#.#...",
"..#......#.....#......#......#.",
"..#...###..##..#.....##..#..##.",
"..#.#..###.........#.#...##.#.#",
"#.........#..#......#...##.....",
"...#...#.#..#...##.#...##.#..#.",
"#.....#.....#.##....#.#......#.",
"#....##..##..#.#..##....#.....#",
".#..........#..#...#..#.......#",
"#.#.....#..##..##..#.#.........",
"....#..##...#.....#.....#.#.#.#",
"...#.#....#........#...#.#.....",
".#............#.......#.##.#...",
"..##.......#.#...#........##..#",
"..................##.#...#.#..#",
".#.........#.......#.....#.....",
"....##...##..#..........#......",
"..#.##..#....#..#............#.",
"....####...#.##....##.#....#.##",
"#..#....#......##........##....",
"..###...........##..#......#...",
"#..#.......#........#.......#..",
".....#....#..#..##.....#.......",
".###.####.#....#....#..#.......",
".............#...............#.",
".#..........#.#....#..#.#......",
"..............##....#..#....##.",
".......#.#..#........#.......##",
"#..#...#..#.#........#..#....#.",
"...#.........#...#..#..........",
"...#....##...#..#..........#...",
".#......#......##..##...#.#....",
".#.........#..###..............",
".................#.#.....##....",
"...#............#..............",
"#..#................#.......#..",
"...#.......#......#.#.#........",
"#.....#.##....#.....#........#.",
"......##.#....#........#....#..",
".#..#.##...##........#.#.....#.",
"..#...#....#...#..#..##..#.#..#",
"#.................#.#.......##.",
"..........#........#.#.....#..#",
"#....##....#........##..##.#...",
"#...#....#.....#.....#.....#...",
"#..#..........#....##....#....#",
"..#.#..#..#....#.#....#....#..#",
"#....#..#.......#..........#...",
".#...#.#...#..#...#.......#....",
"###........#......##..#...##...",
"...#..........##..............#",
".......#........##......#.....#",
".#..........#...#...##....###.#",
".#...#....#..#.....##...#..##..",
".#.#.#...##..........##...#...#",
".#.....#...#........#........##",
"#.......#......##.#.#..#....#..",
"##..#.##........#....#..#......",
"...#.......................#...",
"..#....#..##........##.#.##.#..",
".............#.......#....#.#.#",
"...#...........##..#.....#.....",
"..#....##....#.....#...........",
"..#.....#......#..#.###.##....#",
".#.......#...........#...#....#",
"#............##...#...#.....#..",
"##...#.....#.........##...##...",
"...#...........#....##.........",
"#.##..#..........##..#......#..",
".......#.#.......##.......#....",
"..#.....##..#...#.......#......",
".#........#....##...........#..",
"#.......#...#.#.###...#....#...",
"..........##..#..#..##........#",
"#....#....#...#....#....#......",
"...........#....#...#...##.#...",
".........#.#.....#.............",
"..####...........##..........#.",
".....#...................#.....",
"#..##...#........#.###.#.##....",
"....##...#.##................#.",
".#........###.#............#.#.",
"..............#.##.........#...",
"##............#.#..###....#...#",
"#.....#........####....#....##.",
"....##..#...##..##...##.....#..",
"##..#....#.##.....####.....#.##",
"##..#....#.##.##.#.#........#..",
"....#..........##.....#..#..#..",
"...#.......#........#.........#",
"#..##.######.......##........#.",
"###...#...####.......#.....#...",
"#......#..#.....#......#.....#.",
"..................##...#.......",
"....#.#....#......#...#.....##.",
"..#..#..#..#..#....#.#...#....#",
"......#....###.................",
"#.##......#...#......#.........",
"#..#.#...##..#.......#..#...#..",
".#....#.#........#.........#...",
"#.......##..#..#...............",
"........#..##....#.....#..#....",
"....#......##..#....#...#..#...",
"#.....#...##..#...#......#.....",
".....#.....#.........##...#..#.",
"........#...##.#...#.#....#..##",
"....#....#...#.....##..#...#...",
"#....#..#.........#.........###",
"..###.....##...#.#....##......#",
"#..#.#..#.......#..#....##.....",
"###...#.##..#.......#......#...",
".....#.....##.......#...##..#..",
"......#.......#.#.#......#..#..",
".................##..#.###.....",
"..........#....#...#..........#",
"...#.#...#.#..##.....#.#.##..#.",
".......#..#....#...#......###..",
"...##..........#..#.....#....#.",
".#..##..###...#....##.....#....",
"..#.#..............#....#...#..",
".....####.......#.#.##....#....",
"#.#.#..##.##.#..#.##.#....#..#.",
"........#....#.......##........",
"...#...#....#...###.....###....",
".....#..#..........##.#...##.##",
"..#.#.#..#....#...#..##...#...#",
"..#......#..#.#.....#....#....#",
".#.....#.......#............#..",
"#..##....#...#....##....#......",
"#..#.........#...#...###.#..#..",
"..#.#.#..#.#..#.......##.......",
"...##...............#..#...#.#.",
".......####.#.....#..#..#......",
"......#..#.....#..##....#......",
"....#...#.........##.......#.#.",
"#.#.#...#.....#...#..#.#..#....",
"........#..#.........#..#..##..",
"........###.#............#.#...",
"#..#.......#.#..#.......#...#.#",
"..##..............#.#.....#...#",
"..##...........................",
"..#.....#.......#......##......",
"#...#......##.#....#.#.#...##.#",
"#...#.#......#.#..##.........#.",
".##..#...#.#.....#.#.#...#.#..#",
".#..#...#.#.........#......#...",
"...........#...#...#...#..#.#..",
".#........#...#......##...#.###",
"#........#..#.#..#...........##",
".#...#...####.......#..........",
"......#...............#........",
".....#.#.....#.#...#......#....",
".#........#...........#..##.#..",
"....#..#.....###.......#...#...",
"#.#.........#...##..#.#.##.#...",
"................##.#....#.#...#",
".......#.......#......#...#....",
"#....#.#..............#.##..###",
"..##.##..#.....#............#..",
"#....#..##........#....#.......",
".#.#........#.#................",
"......##..#..#..........#..#.#.",
".....##.#..#....##.#......##...",
"........###.#................#.",
"#..###.....#.###.#...#.#.......",
".#..#.#.#.#..#..#.#.....#.#....",
"#....#.....#..#......##...#..##",
"........#...##..#.#.....#....#.",
".......#..#..#..#....#.....##..",
"....#..##..#...#....#.........#",
"#.#....#..#.#...#.#...#....#...",
".....#......###.......#..##.#.#",
".......##.....#....#........#.#",
".##.##..#..###.#....#.#.....#..",
"..##.#.......###.........#.....",
".#...#......#..#....#..........",
".....#........#.....##...#.....",
"..#......#.#.#..#.#....##.#...#",
"#.#...#...........##......#....",
".................##.....#.#.##.",
"###..#....#..................#.",
"##..#.#.#...#....###.#.#...##.#",
"#.#.#..#....#..............#...",
".....#....#......#..#.##.......",
"#...#...#..###.......#.......#.",
".....#.#........#..#...#.#.....",
".....#..........#.###.......#..",
"...#.##.....#....###.....#.....",
"####........#....#..#.#.##.#...",
"#......#...##.....#.#..##.#.#.#",
".....##....#..#.........##.....",
"..##....##................##..#",
"#.....#...##...##.#.....#...#..",
"..#..#.#.#....#.#.......#......",
"##.....##......#...#.........#.",
"#..........#........#.#......#.",
".#..#.......#.#.....#..........",
".........#.#.......#.#..#..#..#",
"#......#....#....#..##..##...##",
".....#..#...#.......#.....##...",
"..#.##........#.###...#...#...#",
"..#..#...........#..........#..",
".#.#.#...#.##.#..............#.",
"....#..##.......#.....#..##..#.",
".#.##.#....##........#...##.##.",
"...#.#...#....#....#......#####",
".....#.....##...........#......",
"#........#.##.......#.#.......#",
"#...#.......##.#.......#..#.#..",
"#...##..#....#............#.#..",
"........#.#..#...#..#...##..##.",
"#...#....#............#........",
"#.#.#.#.#....##.....##.........",
"......##.........#.......#.#..#",
"...#.#....#........#...........",
"...#.#.......#.....#...........",
"##....####......##.##..#.......",
"#......#...#..#.#..#......#..#.",
"#......#.#....#....#..#........",
"..#.###...#.....#........#.#...",
"..#.....##.....###....#.....#..",
"#.##.#.....##....#...###.......",
"###.#....###.#..##.#.......##.#",
"#..#..##...#.#..........##.##..",
".......####.#..#.....##..###...",
"#...#...##..#..##.......###....",
"#....#.........##..#.........#.",
".....#.#..........#..#...#.#..#",
"..........#......##..#..#.#....",
".#...#...#...#........###....##",
"#....#.##..........#.#.....#.#.",
"#....##.#.##..#.......#.#.....#",
".##..##..#.#...#.#...........#.",
"....##..#...#.#.##.#.#...#.....",
".#...#.##........#.##..#.#....#",
".#.....##.........#.....#......",
"..#.....#.#..#.##.............#",
"##....##...#....##........#....",
".#....#........#.#..#..#..#.##.",
".#........#............#.......",
".#..##..##..#..#..####....#....",
"..#.###....#..#.##......#.#...#",
".###..#.#...##....##....#..##.#",
"....##........#....#.#.#...##..",
"...#..#....#.#....#...#.#.....#",
"...##....##..#....#.........#..",
".....#..##.###..#.....####.....",
"...#..#.........#....#.#.##..#.",
"...#..#...............#..#....#",
"...........#.....#...####..##.#",
"..#......#...#....#..#...##.#..",
".....#..#...........#.......#.#",
"##....###...#.........#....#...",
"...#..##.......#.#.....##....#.",
"#.#...#.#....#.....#...##.....#",
".#...##....#.....#..##.......#.",
"...#........##..........#.....#",
"#...##..#.#....###...#..#......",
"............#.......#......#.#.",
"......#....#.#...#...#..#......",
".#..#......#....#.......#....##",
"...#...#.......###..###...#....",
".............#.#...#..###.....#",
".#.....#........#...##....#..#.",
".....#.......#######.#.#...#...",
	] 

	return input
}

def getExample() {
	def input = [
		"..##.......",
		"#...#...#..",
		".#....#..#.",
		"..#.#...#.#",
		".#...##..#.",
		"..#.##.....",
		".#.#.#....#",
		".#........#",
		"#.##...#...",
		"#...##....#",
		".#..#...#.#",
	] 

	return input
}